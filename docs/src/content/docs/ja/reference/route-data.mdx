---
title: ルートデータ
description: Starlightのルートデータオブジェクトに関する完全なリファレンスドキュメントです。
---

Starlightのルートデータオブジェクトには、現在のページに関する情報が含まれています。Starlightのデータモデルがどのように機能するかについては、[「ルートデータ」ガイド](/ja/guides/route-data/) を参照してください。

Astroコンポーネント内では、`Astro.locals.starlightRoute`からルートデータにアクセスできます。

```astro {4}
---
// src/components/Custom.astro

const { hasSidebar } = Astro.locals.starlightRoute;
---
```

[ルートミドルウェア](/ja/guides/route-data/#ルートデータのカスタマイズ)内では、ミドルウェア関数に渡されるcontextオブジェクトからルートデータにアクセスします。

```ts {5}
// src/routeData.ts
import { defineRouteMiddleware } from '@astrojs/starlight/route-data';

export const onRequest = defineRouteMiddleware((context) => {
	const { hasSidebar } = context.locals.starlightRoute;
});
```

## `starlightRoute`

`starlightRoute`オブジェクトは、以下のプロパティをもちます。

### `dir`

**型:** `'ltr' | 'rtl'`

ページの書字方向。

### `lang`

**型:** `string`

このページのロケールのBCP-47言語タグ。たとえば`en`、`zh-CN`、`pt-BR`など。

### `locale`

**型:** `string | undefined`

言語が配信されるベースパス。ルートロケールスラグの場合は`undefined`となります。

### `siteTitle`

**型:** `string`

このページのロケールのサイトタイトル。

### `siteTitleHref`

**型:** `string`

サイトタイトルの`href`属性の値。たとえば`/`など、ホームページへのリンクとなります。多言語サイトの場合、たとえば`/en/`や`/zh-cn/`など、現在のロケールが含まれます。

### `slug`

**型:** `string`

コンテンツファイル名から生成されたページのスラグ。

このプロパティは非推奨であり、Starlightの将来のバージョンで削除される予定です。[Starlightの`docsLoader`](/ja/manual-setup/#コンテンツコレクションの設定)を使用して新しいコンテンツレイヤーAPIに移行し、代わりに[`id`](#id)プロパティを使用してください。

### `id`

**型:** `string`

このページのスラグ。[`legacy.collections`](https://docs.astro.build/ja/reference/legacy-flags/#collections)フラグを使用している場合は、コンテンツファイル名に基づくページの一意のIDとなります。

### `isFallback`

**型:** `boolean | undefined`

このページが現在の言語で未翻訳であり、デフォルトロケールのフォールバックコンテンツを使用している場合は`true`となります。多言語サイトでのみ使用されます。

### `entryMeta`

**型:** `{ dir: 'ltr' | 'rtl'; lang: string }`

ページコンテンツのロケールメタデータ。ページがフォールバックコンテンツを使用している場合、トップレベルのロケール値とは異なる場合があります。

### `entry`

現在のページのAstroコンテンツコレクションのエントリー。`entry.data`には、現在のページのフロントマターの値が含まれます。

```ts
entry: {
	data: {
		title: string;
		description: string | undefined;
		// その他の値
	}
}
```

このオブジェクトの構造については、[Astroのコレクションエントリー型](https://docs.astro.build/ja/reference/modules/astro-content/#collectionentry)リファレンスを参照してください。

### `sidebar`

**型:** `SidebarEntry[]`

ページのサイトナビゲーション用サイドバーのエントリー。

### `hasSidebar`

**型:** `boolean`

ページにサイドバーを表示するかどうか。

### `pagination`

**型:** `{ prev?: Link; next?: Link }`

ページネーションの設定が有効な場合にサイドバーに表示される、前のページと次のページへのリンク。

### `toc`

**型:** `{ minHeadingLevel: number; maxHeadingLevel: number; items: TocItem[] } | undefined`

目次の設定が有効な場合、このページの目次。

### `headings`

**型:** `{ depth: number; slug: string; text: string }[]`

現在のページから抽出されたすべてのMarkdown見出しの配列。Starlightの設定オプションをもとに目次コンポーネントを作成したい場合は、[`toc`](#toc)を使用してください。

### `lastUpdated`

**型:** `Date | undefined`

最終更新日の設定が有効な場合、このページが最後に更新された日時を表わすJavaScriptの`Date`オブジェクト。

### `editUrl`

**型:** `URL | undefined`

ページの編集設定が有効な場合、このページを編集可能なアドレスの`URL`オブジェクト。

### `head`

**型:** [`HeadConfig[]`](/ja/reference/configuration/#headconfig)

現在のページの`<head>`に含めるすべてのタグの配列。`<title>`や`<meta charset="utf-8">`などの重要なタグが含まれます。

## ユーティリティ

### `defineRouteMiddleware()`

ルートミドルウェアモジュールに型を付けるには、`defineRouteMiddleware()`ユーティリティを使用します。

```ts "defineRouteMiddleware"
// src/routeData.ts
import { defineRouteMiddleware } from '@astrojs/starlight/route-data';

export const onRequest = defineRouteMiddleware((context) => {
	// ...
});
```

### `StarlightRouteData`型

Starlightのルートデータを扱うコードを書く場合は、`StarlightRouteData`型をインポートして`Astro.locals.starlightRoute`の型定義に合わせることができます。

以下の例では、`usePageTitleInTOC()`関数がルートデータを更新し、目次の最初の項目のラベルとして現在のページのタイトルを使用することで、デフォルトの「概要」ラベルを置き換えます。`StarlightRouteData`型により、ルートデータの変更が正しいかどうかを確認できます。

```ts "StarlightRouteData"
// src/route-utils.ts
import type { StarlightRouteData } from '@astrojs/starlight/route-data';

export function usePageTitleInTOC(starlightRoute: StarlightRouteData) {
	const overviewLink = starlightRoute.toc?.items[0];
	if (overviewLink) {
		overviewLink.text = starlightRoute.entry.data.title;
	}
}
```

この関数は次のようにルートミドルウェアから呼び出すことができます。

```ts {3,6}
// src/route-middleware.ts
import { defineRouteMiddleware } from '@astrojs/starlight/route-data';
import { usePageTitleInTOC } from './route-utils';

export const onRequest = defineRouteMiddleware((context) => {
	usePageTitleInTOC(context.locals.starlightRoute);
});
```
