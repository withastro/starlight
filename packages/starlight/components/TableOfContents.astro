---
import type { MarkdownHeading } from 'astro';
import config from 'virtual:starlight/user-config';
import { generateToC } from './TableOfContents/generateToC';
import TableOfContentsList from './TableOfContents/TableOfContentsList.astro';

interface Props {
  headings: MarkdownHeading[];
}

const toc = generateToC(Astro.props.headings, config.tableOfContents);
---

<starlight-toc
  data-min-h={config.tableOfContents.minHeadingLevel}
  data-max-h={config.tableOfContents.maxHeadingLevel}
>
  <nav aria-labelledby="starlight__on-this-page">
    <h2 id="starlight__on-this-page">On this page</h2>
    <TableOfContentsList toc={toc} />
  </nav>
</starlight-toc>

<script src="./TableOfContents/starlight-toc"></script>
