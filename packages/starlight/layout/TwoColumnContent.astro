---
const sidebar = await Astro.slots.render('right-sidebar');
const hasSidebar = Boolean(sidebar.trim());
---

<div class:list={['container', { hasSidebar }]}>
  {
    hasSidebar && (
      <aside class="right-sidebar-container hidden lg:block">
        <div class="right-sidebar" set:html={sidebar} />
      </aside>
    )
  }
  <div class="main-pane"><slot /></div>
</div>

<style>
  @media (min-width: 72rem) {
    .container {
      display: flex;
    }

    .right-sidebar-container {
      order: 2;
      position: relative;
      width: calc(
        var(--sl-sidebar-width) +
          (100% - var(--sl-content-width) - var(--sl-sidebar-width)) / 2
      );
    }

    .right-sidebar {
      position: fixed;
      top: 0;
      border-inline-start: 1px solid var(--sl-color-gray-6);
      padding-top: var(--sl-nav-height);
      width: 100%;
      height: 100vh;
      overflow-y: auto;
      scrollbar-width: none;
    }

    .main-pane {
      width: 100%;
    }

    .hasSidebar .main-pane {
      --sl-content-margin-inline: auto 0;

      order: 1;
      width: calc(
        var(--sl-content-width) +
          (100% - var(--sl-content-width) - var(--sl-sidebar-width)) / 2
      );
    }
  }
</style>
